/**
 * Automatically generated by QHGC tool
 * @date: {{time}}
 */
import React from "react";
import {PageContainer} from "@ant-design/pro-layout";
import {Form, Card, Modal} from "antd";
import {history} from 'umi';
import YunReact from "@/utils/YunReact";
import EditForm from "./components/EditForm";
import api from "./service/api";
{{import}}

/**
 * 新增页面主函数
 * @returns {JSX.Element}
 * @constructor
 */
const Index = () => {

  const [form] = Form.useForm();

  return (
    <PageContainer>
      <Card bordered={false}>
        <EditForm
          form={form}
          onFinish={onFinish}
        />
      </Card>
    </PageContainer>
  )

  // 表单提交
  function onFinish(values) {
    YunReact.fetchPost(api.create, values, () => {
      Modal.success({
        title: '新建成功',
        onOk: () => {
          history.goBack();
        }
      });
    })
  }
}

export default Index;
